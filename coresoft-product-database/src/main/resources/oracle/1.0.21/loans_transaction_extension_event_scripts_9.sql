
------up dating LOAN_EVENT_TYPE
update LOAN_EVENT_TYPE set DEBIT_OR_CREDIT=null where  EVENT_TYPE_ID=042;
update LOAN_EVENT_TYPE set EVENT_GROUP=2 where EVENT_TYPE_ID=42;




-------posting rule 

alter table  LOAN_ENTRY_POSTING_RULE add AFF_BANK_DISCOUNT number(1) default 0;
alter table  LOAN_ENTRY_POSTING_RULE add AFF_MATURITY_DATE number(1) default 0;
alter table  LOAN_ENTRY_POSTING_RULE add AFF_ORG_LOAN_TERM number(1) default 0;
alter table  LOAN_ENTRY_POSTING_RULE add AFF_EXTEN_INT_ASS number(1) default 0;
alter table  LOAN_ENTRY_POSTING_RULE add AFF_EXTEN_INT_PAID number(1) default 0;
alter table  LOAN_ENTRY_POSTING_RULE add AFF_TIMES_EXTENDED number(1) default 0;
alter table  LOAN_ENTRY_POSTING_RULE add AFF_LAST_EXTEN_DATE number(1) default 0;
alter table  LOAN_ENTRY_POSTING_RULE add ADD_EXTEN_ITEM number(1) default 0;


insert into LOAN_ENTRY_POSTING_RULE (POSTING_RULE_ID) values (40);
insert into LOAN_ENTRY_POSTING_RULE (POSTING_RULE_ID) values (41);
insert into LOAN_ENTRY_POSTING_RULE (POSTING_RULE_ID) values (42);
insert into LOAN_ENTRY_POSTING_RULE (POSTING_RULE_ID) values (8842);

update LOAN_ENTRY_POSTING_RULE set AFF_BANK_DISCOUNT=1 where POSTING_RULE_ID=40;
update LOAN_ENTRY_POSTING_RULE set AFF_EXTEN_INT_ASS=1 where POSTING_RULE_ID=41;
update LOAN_ENTRY_POSTING_RULE set AFF_EXTEN_INT_PAID=1 where POSTING_RULE_ID=42;
update LOAN_ENTRY_POSTING_RULE set AFF_TIMES_EXTENDED=1 where POSTING_RULE_ID=8842;
update LOAN_ENTRY_POSTING_RULE set AFF_LAST_EXTEN_DATE=1 where POSTING_RULE_ID=8842;
update LOAN_ENTRY_POSTING_RULE set ADD_EXTEN_ITEM=1 where POSTING_RULE_ID=8842;
update LOAN_ENTRY_POSTING_RULE set AFF_MATURITY_DATE=1 where POSTING_RULE_ID=8842;
update LOAN_ENTRY_POSTING_RULE set AFF_ORG_LOAN_TERM=1 where POSTING_RULE_ID=8842;
update LOAN_ENTRY_POSTING_RULE set AFFECTS_DATE_NEXT_DUE=1 where POSTING_RULE_ID=8842;
update LOAN_ENTRY_POSTING_RULE set AFFECTS_SCHD_PYMNT_DUE_DATE=1 where POSTING_RULE_ID=8842;
update LOAN_ENTRY_POSTING_RULE set AFFECTS_DISC_INT_REM_TERM=1 where POSTING_RULE_ID=8842;
update LOAN_ENTRY_POSTING_RULE set AFFECTS_INT_DUE_DATE=1 where POSTING_RULE_ID=8842;
update LOAN_ENTRY_POSTING_RULE set AFFECTS_PRNCP_DUE_DATE=1 where POSTING_RULE_ID=8842;


-----entry types

insert into ENTRY_TYPE (UNIQUE_ID, ID, INSTITUTION_ID, DEBIT_OR_CREDIT, DESCRIPTION, ACCOUNT_CATEGORY, POSTING_SEQUENCE)
values ('1840','1840', null, 0, 'BANK DISCOUNT' , 2, null);
insert into ENTRY_TYPE (UNIQUE_ID, ID, INSTITUTION_ID, DEBIT_OR_CREDIT, DESCRIPTION, ACCOUNT_CATEGORY, POSTING_SEQUENCE)
values ('1841','1841', null, 0, 'EXTENSION INTEREST ASSESSED' , 2, null);
insert into ENTRY_TYPE (UNIQUE_ID, ID, INSTITUTION_ID, DEBIT_OR_CREDIT, DESCRIPTION, ACCOUNT_CATEGORY, POSTING_SEQUENCE)
values ('1842','1842', null, 0, 'EXTENSION INTEREST PAID' , 2, null);

insert into ENTRY_TYPE (UNIQUE_ID, ID, INSTITUTION_ID, DEBIT_OR_CREDIT, DESCRIPTION, ACCOUNT_CATEGORY, POSTING_SEQUENCE)
values ('1940','1940', null, 1, 'BANK DISCOUNT' , 2, null);
insert into ENTRY_TYPE (UNIQUE_ID, ID, INSTITUTION_ID, DEBIT_OR_CREDIT, DESCRIPTION, ACCOUNT_CATEGORY, POSTING_SEQUENCE)
values ('1941','1941', null, 1, 'EXTENSION INTEREST ASSESSED' , 2, null);
insert into ENTRY_TYPE (UNIQUE_ID, ID, INSTITUTION_ID, DEBIT_OR_CREDIT, DESCRIPTION, ACCOUNT_CATEGORY, POSTING_SEQUENCE)
values ('1942','1942', null, 1, 'EXTENSION INTEREST PAID' , 2, null);


insert into LOAN_ENTRY_TYPE (ENTRY_TYPE_ID, ENTRY_NAME, REVERSAL_ENTRY_TYPE_ID, POSTING_RULE_ID)
values('1840', '40', '1940', 40);
insert into LOAN_ENTRY_TYPE (ENTRY_TYPE_ID, ENTRY_NAME, REVERSAL_ENTRY_TYPE_ID, POSTING_RULE_ID)
values('1841', '41', '1941', 41);
insert into LOAN_ENTRY_TYPE (ENTRY_TYPE_ID, ENTRY_NAME, REVERSAL_ENTRY_TYPE_ID, POSTING_RULE_ID)
values('1842', '42', '1942', 42);

insert into LOAN_ENTRY_TYPE (ENTRY_TYPE_ID, ENTRY_NAME, REVERSAL_ENTRY_TYPE_ID, POSTING_RULE_ID)
values('1940', '40', '1840', 40);
insert into LOAN_ENTRY_TYPE (ENTRY_TYPE_ID, ENTRY_NAME, REVERSAL_ENTRY_TYPE_ID, POSTING_RULE_ID)
values('1941', '41', '1841', 41);
insert into LOAN_ENTRY_TYPE (ENTRY_TYPE_ID, ENTRY_NAME, REVERSAL_ENTRY_TYPE_ID, POSTING_RULE_ID)
values('1942', '42', '1842', 42);

------update ENTRY_TYPE set DEBIT_OR_CREDIT=null where UNIQUE_ID='8842';
insert into LOAN_ENTRY_TYPE (ENTRY_TYPE_ID, ENTRY_NAME, REVERSAL_ENTRY_TYPE_ID, POSTING_RULE_ID)
values('8842', '8842', '8842', '8842');


---EVENT - ENTRY TYPES LINK
insert into LOAN_EVENT_ENTRY_TYPE_LINK (EVENT_TYPE_ID, ENTRY_TYPE_ID) VALUES(42, 1801);
insert into LOAN_EVENT_ENTRY_TYPE_LINK (EVENT_TYPE_ID, ENTRY_TYPE_ID) VALUES(42, 1923);
insert into LOAN_EVENT_ENTRY_TYPE_LINK (EVENT_TYPE_ID, ENTRY_TYPE_ID) VALUES(42, 1922);
insert into LOAN_EVENT_ENTRY_TYPE_LINK (EVENT_TYPE_ID, ENTRY_TYPE_ID) VALUES(42, 1940);
insert into LOAN_EVENT_ENTRY_TYPE_LINK (EVENT_TYPE_ID, ENTRY_TYPE_ID) VALUES(42, 1841);
insert into LOAN_EVENT_ENTRY_TYPE_LINK (EVENT_TYPE_ID, ENTRY_TYPE_ID) VALUES(42, 1942);
insert into LOAN_EVENT_ENTRY_TYPE_LINK (EVENT_TYPE_ID, ENTRY_TYPE_ID) VALUES(42, 8842);


------EXTENSION TABLE

create table LOAN_EXTENSION_EVENT(
EVENT_ID number(20,0) not null,
EXTENSION_TYPE number(2),
NO_OF_PAYMENTS_EXTENDED number(2),
EXTENSION_INTEREST number(2),
PAYMENT_STATUS number(2),
CONSTRAINT LOAN_EXTENSION_EVENT_PKEY PRIMARY KEY(EVENT_ID));

ALTER TABLE LOAN_EXTENSION_EVENT ADD FOREIGN KEY (EVENT_ID) REFERENCES LOAN_ACCOUNT_EVENT(EVENT_ID);

alter table LOAN_EXTENSION_EVENT modify  EXTENSION_INTEREST number(20,2);

update EXTENSION_NEW set EXT_INTEREST_ASSESS_YTD=0
where EXT_INTEREST_ASSESS_YTD is null;
 
update EXTENSION_NEW set  TIMES_EXT_YTD=0
where TIMES_EXT_YTD is null;
 
update EXTENSION_NEW set  EXT_INTEREST_PAID_YTD=0
where EXT_INTEREST_PAID_YTD is null;

